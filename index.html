<?xml version="1.0" encoding="utf-8"?>
<!--
  ~ HKNBP_Electron is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ HKNBP_Electron is distributed in the hope that it will be useful,
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with HKNBP_Electron.  If not, see <https://www.gnu.org/licenses/>.
  -->

<!DOCTYPE html>
<html>
<head>
  <title>HKNBP_Electron</title>
</head>
<body style="background-color:#000;">
  <iframe id="HKNBP_Core"
      src="https://hknbp.org/"
      style="width:100%; height:100%; position:absolute; top:0; left:0;"
      frameBorder="0"
      allow="autoplay; fullscreen;"
      allowfullscreen>
    你嘅瀏覽器唔支援iframe
  </iframe>
  <script>
    var hknbpCoreIframe = document.getElementById("HKNBP_Core");

    var hknbpCoreIframeIsLoaded = false;

    hknbpCoreIframe.addEventListener("load", function() {
      hknbpCoreIframeIsLoaded = true;
    });

    function setOnHKNBPCoreIframeLoaded(onLoaded) {
      if (hknbpCoreIframeIsLoaded === true) {
        onLoaded();
      } else {
        hknbpCoreIframe.addEventListener("load", function() {onLoaded();});
      }
    }

    function callHKNBPCoreIframe(expr) {
      setOnHKNBPCoreIframeLoaded(function() {
        var caller = {};
        caller.name = "HKNBP_AppLayer";
        caller.expr = expr;
        hknbpCoreIframe.contentWindow.postMessage(JSON.stringify(caller), "*")
      });
    }
  </script>
  <script>
    var hknbpUWPAppVersion = "0.9-Electron";

    callHKNBPCoreIframe("HKNBP_Core.org.sourcekey.hknbp.hknbp_core.appVersion = \"" + hknbpUWPAppVersion + "\"");
  </script>
</body>
</html>
